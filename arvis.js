////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
const { Client, GatewayIntentBits, Partials, Collection, WebhookClient } = require("discord.js");
const ayarlar = require('./Settings/ayarlar.json');

const client = global.client = new Client({intents: Object.keys(GatewayIntentBits),partials:Object.keys(Partials)});

const { loadEvents } = require('./Handlers/eventHandler');
const { loadCommands } = require('./Handlers/commandHandler');
const komut = require('./Commands/Bot/build');

const { EventEmitter } = require('events');
EventEmitter.defaultMaxListeners = 220;

client.commands = new Collection();
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
client.userTempVoiceChannels = new Map(); 

const voiceStateModule = require("./Events/Voice/voiceStateUpdate");
client.on("voiceStateUpdate", (...args) => voiceStateModule.execute(...args, client)); 
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
const { hookConsole } = require('./Utils/logger');
hookConsole();
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
const burcGönderici = require('./Utils/burcGönderici');
burcGönderici(client);
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
const autoBackup = require('./Utils/autoBackup');
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
require("./Events/interactions/interactionCreate.js")(client); 
require('./Utils/logger.js').hookConsole();
require('./Utils/haberKontrol.js')(client);
require('./Events/Timers/eskiYeniUyeKontrol')(client);
require("./Commands/Yedek/yedekAlıcı")(client); 
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

client.login(ayarlar.token).then(() => {
    komut.runEvent(client);
    loadEvents(client);
    loadCommands(client);
    autoBackup(client);
});